!function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var f=n[a]={exports:{}};t[a][0].call(f.exports,function(e){var n=t[a][1][e];return o(n?n:e)},f,f.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){var r=e("./js/main");r.init(window)},{"./js/main":8}],2:[function(e,t,n){var r=e("./Event"),o=e("./Params"),i=e("./Util"),a=e("./Config"),s=[].slice,c={act:{b:"batchdownload",dl:"download",d:"detail"},ls:{MIGUHUI:{}},init:function(){var e=this;e.ls.MIGUHUI[e.act.d]=100},support:function(e){var t=this,n=i.getCookie(o.version),r=i.getCookie(o.version_type),a=!1;if(e&&i.s(n)&&n.length>0){n=parseInt(n,10);var s=t.ls[r][e];s&&n>=s&&(a=!0)}return a},checkVersion:function(e){var t=i.getCookie(o.version),n=!1;return i.s(t)&&t.length>0&&(t=parseInt(t,10),t>e&&(n=!0)),n}},u={ua:navigator.userAgent.toLowerCase(),isChrome:function(){var e=this.ua;return e.match(/360 aphone /i)?!1:"chrome"==e.match(/Chrome/i)},query:function(e){var t="";for(var n in e)t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])+"&";return t},isWechat:function(){return"micromessenger"==this.ua.match(/MicroMessenger/i)?1:0},isQq:function(){return this.ua.match(/MQQBrowser/i)?1:0},bs:function(){var e="",t=this.ua,n={whatchar:t.match(/MicroMessenger/i)?"微信":"",uc:t.match(/(UCBrowser)|(UCWEB)/i)?"UC浏览器":"",qq:t.match(/MQQBrowser/i)?"QQ浏览器":"",op:t.match(/oupeng/i)?"欧朋浏览器":"",ay:t.match(/MxBrowser/i)?"遨游浏览器":"",lb:t.match(/LieBao/i)?"猎豹浏览器":"",xm:t.match(/MiuiBrowser/i)?"小米浏览器":"",bd:t.match(/baidubrowser/i)?"百度浏览器":"",b360:t.match(/360 aphone/i)?"360浏览器":"",sg:t.match(/sogoumobilebrowser/i)?"搜狗浏览器":""};for(var r in n)if(""!=n[r]){e=n[r];break}return e},longFileNameAccept:function(){var e=!1,t=this.ua,n={qq:t.match(/MQQBrowser/i)?"QQ浏览器":"",ay:t.match(/MxBrowser/i)?"遨游浏览器":"",lb:t.match(/LieBao/i)?"猎豹浏览器":"",bd:t.match(/baidubrowser/i)?"百度浏览器":""};for(var r in n)if(""!=n[r]){e=!0;break}return e},getCurrentBs:function(){var e=this.bs();return""!=e?e:"浏览器"}},f={reqUrl:{index:"miguhui://index",launch:"miguhui://launchbrowser?url="},reqMethod:{queryapp:"queryapp&appname=",querydownprogress:"querydownprogress&contentid=",download:"download&url=",jump:"jump&url=",batchdownload:"batchdownload&contentids="},run:function(e,t){var n=this;t&&n.isChrome()?n.chrome(e):n.iframe(e)},isChrome:function(){var e=navigator.userAgent.toLowerCase();return e.match(/360 aphone /i)?!1:"chrome"==e.match(/Chrome/i)},downloadApp:function(e){window.location.href=e},chrome:function(e){var t=e.split("://"),n=t[0],e=t[1],r="intent://"+e+"#Intent;scheme="+n+("mm"==n?";package="+o.mmpkg:"")+";end";window.location.href=r},iframe:function(e){var t=document.createElement("iframe");t.style.display="none",t.src=e,document.body.appendChild(t),setTimeout(function(){document.body.removeChild(t)},2e3)},open:function(e,t){var n=this,r=c,i=u,t=t||a.showtitle,s=n.reqUrl,f=n.reqMethod,l=s.launch+encodeURIComponent(e),p=o.getBaseUrl();r.support(r.act.d)?(l=p+f.jump+encodeURIComponent(e)+(t?"&appname="+i.getCurrentBs():""),n.iframe(l)):n.run(l,!0)},error:function(){var e=this,t=a.onIntent,n=e.reqUrl,o=u,i=o.ua.match(/(UCBrowser)|(UCWEB)/i)?3e3:900,c=s.call(arguments);if(o.isWechat());else if(t){var f=Date.now();e.iframe(n.index);Date.now();setTimeout(function(){var e=Date.now();(!f||i+200>e-f)&&c.unshift("downloadmm"),c.unshift("server.check.start"),r.trigger.apply(r,c)},i)}else;}};c.init(),t.exports={execute:function(e){var t=f;return t[e]&&t[e].apply(t,s.call(arguments,1))}}},{"./Config":3,"./Event":4,"./Params":5,"./Util":7}],3:[function(e,t,n){t.exports={showtitle:!0,onIntent:!0}},{}],4:[function(e,t,n){function r(e,t,n){(e||"").split(u).forEach(function(e){n(e,t)})}function o(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function i(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function a(e,t,n,r){var a,s;return s=i(t),s.ns&&(a=o(s.ns)),e.filter(function(e){return e&&(!s.e||e.e===s.e)&&(!s.ns||a.test(e.ns))&&(!n||e.cb===n||e.cb._cb===n)&&(!r||e.ctx===r)})}function s(e,t){return this instanceof s?(t&&$.extend(this,t),this.type=e,this):new s(e,t)}var c=[].slice,u=/\s+/,f=function(){return!1},l=function(){return!0};s.prototype={isDefaultPrevented:f,isPropagationStopped:f,preventDefault:function(){this.isDefaultPrevented=l},stopPropagation:function(){this.isPropagationStopped=l}},t.exports={on:function(e,t,n){var o,a=this;return t?(o=this._events||(this._events=[]),r(e,t,function(e,t){var r=i(e);r.cb=t,r.ctx=n,r.ctx2=n||a,r.id=o.length,o.push(r)}),this):this},one:function(e,t,n){var o=this;return t?(r(e,t,function(e,t){var r=function(){return o.off(e,r),t.apply(n||o,arguments)};r._cb=t,o.on(e,r,n)}),this):this},off:function(e,t,n){var o=this._events;return o?e||t||n?(r(e,t,function(e,t){a(o,e,t,n).forEach(function(e){delete o[e.id]})}),this):(this._events=[],this):this},trigger:function(e){var t,n,r,o,i,u=-1;if(!this._events||!e)return this;if("string"==typeof e&&(e=new s(e)),t=c.call(arguments,1),e.args=t,t.unshift(e),n=a(this._events,e.type))for(o=n.length;++u<o;)if((r=e.isPropagationStopped())||!1===(i=n[u]).cb.apply(i.ctx2,t)){r||(e.stopPropagation(),e.preventDefault());break}return this}}},{}],5:[function(e,t,n){var r=e("./Util"),o="http://{adress}:{port}/moversion",i="http://{adress}:{port}/action=",a="pps.a.migu.cn",s="127.0.0.1";navigator.userAgent.toLowerCase().match(/MicroMessenger|MQQBrowser/i)?(o=o.replace("{adress}",a),i=i.replace("{adress}",a)):(o=o.replace("{adress}",s),i=i.replace("{adress}",s)),t.exports={versionUrl:o,baseUrl:i,DAEMON:"mmcd",mmpkg:"com.aspire.mm",version:"mmversion",version_type:"mmversiontype",port:"mmport",getBaseUrl:function(){var e=this,t=r.getCookie(e.port);return i.replace("{port}",t)}}},{"./Util":7}],6:[function(e,t,n){function r(e){C=w.call(e.args,1),p||(u.trigger("server.before.check"),m.forEach(function(e){var t=document.createElement("script");t.type="text/javascript",t.setAttribute("port",e),t.setAttribute("class","__js_load_mm"),t.onload=t.onerror=c,t.src=v.replace("{port}",e)+"?"+Date.now(),document.getElementsByTagName("head")[0].appendChild(t)}))}function o(){s(),p=!0,h="",d=0,l.setCookie(f.port,null),l.setCookie(f.version,null),l.setCookie(f.version_type,null)}function i(e){var t=e.args.slice(1),n=function(){C.unshift("server.check.error"),u.trigger.apply(u,C)};if(s(),"success"===t[0]){l.setCookie(f.port,t[1]);var r=window.__MIGU_ZONE_VERSION;"undefined"!=typeof r&&r&&"undefined"!=typeof r.appname?(a(r),window.__MIGU_ZONE_VERSION=null,C.unshift("server.check.success"),u.trigger.apply(u,C)):n()}else n();p=!1,h="",d=0}function a(e){var t=e.appname;if(t&&t.length>0){var n=t.match(g);if(n){var r=n[1]||"MIGUHUI";if(l.setCookie(f.version_type,r.toUpperCase()),n=n[0].replace(/(MIGUHUI)/i,""),n.length>0){var o=n.replace(/\./g,"");l.setCookie(f.version,o||0)}}}}function s(){var e=document.getElementsByClassName("__js_load_mm");if(e.length){var t=w.call(e);t.forEach(function(e){e.onload=e.onerror=null,e.remove&&(e.remove(),1)||e.parentNode&&(e.parentNode.removeChild(e),1)})}}function c(e){if(""===h)if("load"==e.type){var t=e.target;h=t.getAttribute("port"),u.trigger("server.after.check","success",h)}else d++,d==m.length&&u.trigger("server.after.check","error")}var u=e("./Event"),f=e("./Params"),l=e("./Util"),p=!1,h="",m=[9818,19818,29818,39818,49818,59818],v=f.versionUrl,d=0,g=/^(MIGUHUI)[0-9]+(\.[0-9]*|$)?(\.[0-9]*|$)?/i,w=[].slice,C=[];window.__MIGU_ZONE_VERSION=null,void 0==window.setmiguzoneversion?window.setmiguzoneversion=function(e){window.__MIGU_ZONE_VERSION=e}:console.log("mgwap 设置版本方法setmiguzoneversion被占用");var y=function(){u.on("server.before.check",o.bind(this)),u.on("server.after.check",i.bind(this)),u.on("server.check.start",r.bind(this))};t.exports={init:y}},{"./Event":4,"./Params":5,"./Util":7}],7:[function(e,t,n){var r={e:Object.prototype.toString,f:function(e){return"[object Function]"==this.e.call(e)},o:function(e){return"[object Object]"==this.e.call(e)},a:function(e){return"[object Array]"==this.e.call(e)},s:function(e){return"string"==typeof e},each:function(e,t){var n=this;if(n.f(t))if(n.o(e))for(var r in e)t(r,e[r]);else if(e&&e.length>0)for(var o=0;o<e.length;o++)t(e[o],o)},CHATSET:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",encode:function(e){var t=this,n="";if(!isNaN(e))for(var r=parseInt(e,10),o=t.CHATSET,i=o.length;r>0;r=parseInt(r/i,10))n+=o.charAt(parseInt(r%i,10));return n},decode:function(e){if("undefined"==typeof e||0==e.length)return 0;for(var t=this.CHATSET,n=t.length,r=0,o=0;o<e.length;o++){var i=e.charAt(o),a=t.indexOf(i);r+=a*Math.pow(n,o)}return r},setCookie:function(e,t,n){var r=e+"="+encodeURIComponent(t)+";path=/";if(null!=n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3),r+=";expires="+o.toGMTString()}document.cookie=r},getCookie:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=t?decodeURIComponent(t[2]):null}};t.exports=r},{}],8:[function(e,t,n){function r(e){e.mg={open:function(e,t){t=!1,o.trigger("server.check.start","open",e,t)},error:function(e){if("function"==typeof e){var t=function(t){var n=s.call(t.args,1),r=n&&n[0]||"";"downloadmm"==r&&e.apply(this,arguments)};o.on.call(o,"server.check.error",t)}}}}var o=e("./Event"),i=(e("./Util"),e("./Client")),a=e("./ServerManager"),s=(e("./Config"),[].slice);Function.prototype.bind||(Function.prototype.bind=function(e){var t=[].slice,n=t.call(arguments,1),r=this,o=function(){},i=function(){return r.apply(this instanceof o?this:e||{},n.concat(t.call(arguments)))};return o.prototype=r.prototype,i.prototype=new o,i}),a.init(),o.on("server.check.success",function(e){var t=e.args.slice(1),n=t&&t[0]||"";"downloadmm"==n&&t.shift(),i.execute.apply(i,t)}),o.on("server.check.error",function(e){var t=s.call(e.args,1),n=t&&t[0]||"";if("downloadmm"!==n)t.unshift("error");else{var r=t[1];if(4===t.length&&"open"===r&&!t[3])return}i.execute.apply(i,t)}),t.exports={init:r}},{"./Client":2,"./Config":3,"./Event":4,"./ServerManager":6,"./Util":7}]},{},[1]);